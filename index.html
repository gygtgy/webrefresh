<!DOCTYPE html>
<html>
<head>
    <title>iFrame Portal v666</title>
    <style>
        body {
            font-family: Consolas, monospace;
            background: black;
            color: #00ff88;
            text-align: center;
            overflow-x: hidden;
        }

        /* Animated hacker background */
        @keyframes hackerRain {
            0% { background-position: 0 0; }
            100% { background-position: 0 2000px; }
        }
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-image: linear-gradient(#003300 1px, transparent 1px),
                              linear-gradient(90deg, #003300 1px, transparent 1px);
            background-size: 20px 20px;
            opacity: 0.2;
            z-index: -1;
            animation: hackerRain 20s linear infinite;
        }

        iframe {
            width: 90vw;
            height: 70vh;
            border: 3px solid #00ff88;
            margin-top: 20px;
            background: #111;
        }

        input, button, select {
            padding: 8px;
            background: #111;
            color: #00ff88;
            border: 2px solid #00ff88;
            margin: 5px;
        }

        #history {
            margin-top: 20px;
            max-height: 150px;
            overflow-y: auto;
            border: 2px solid #00ff88;
            padding: 10px;
        }

        #titlePreview {
            margin-top: 10px;
            font-size: 18px;
            color: #00ffaa;
        }
    </style>
</head>
<body>

    <h1>âš¡ iFrame Portal v666 â€“ Multiverse Refresh Engine âš¡</h1>

    <input id="urlInput" type="text" placeholder="Enter URL (https://...)" size="40" />
    <button onclick="loadIframe()">Load</button>

    <br>

    <!-- Refresh slider -->
    <label>Refresh Speed (seconds): </label>
    <input id="speed" type="range" min="2" max="120" value="20" oninput="speedLabel.textContent = this.value">
    <span id="speedLabel">20</span>

    <div id="titlePreview">Title: (none)</div>

    <iframe id="viewer" src=""></iframe>

    <h2>History</h2>
    <div id="history"></div>

    <script>
        let timer;

        // Gremlin roar on refresh
        function gremlinRoar() {
            console.log("ðŸ¦ IFRAME ATTACK!!!");
            // Optional audio: uncomment if you want loud chaos
            // new Audio('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg').play();
        }

        async function loadIframe() {
            const url = document.getElementById("urlInput").value;
            const frame = document.getElementById("viewer");

            if (!url) return;

            frame.src = url;

            // Add to history
            const history = document.getElementById("history");
            const entry = document.createElement("div");
            entry.textContent = url;
            history.prepend(entry);

            // Clear timer
            clearInterval(timer);

            // Set new refresh timer
            const speed = document.getElementById("speed").value * 1000;
            timer = setInterval(() => {
                frame.src = url;
                gremlinRoar();
            }, speed);

            // Fetch title preview (if allowed)
            previewTitle(url);
        }

        async function previewTitle(url) {
            try {
                const res = await fetch("https://api.allorigins.win/get?url=" + encodeURIComponent(url));
                const data = await res.json();
                const title = data.contents.match(/<title>(.*?)<\/title>/i);
                document.getElementById("titlePreview").textContent =
                    title ? "Title: " + title[1] : "Title: (unavailable)";
            } catch {
                document.getElementById("titlePreview").textContent =
                    "Title: (blocked by CSP)";
            }
        }
    </script>

</body>
</html>
